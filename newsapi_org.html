<!DOCTYPE html>

<html lang="en-us">

  <head>

    <title>World Cup WebApp</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <style type="text/css">
    
      .jumbotron{
      text-align:center;
      }

    </style>

  </head>

  <body>
  <div class="jumbotron">
   <div class="container">
      <h1 class="display-3">World Cup News!</h1>
      <p class="lead">This is a search section for World Cup news by national teams participating in Russia 2018.</p>
      <hr class="my-4">
      <p>Click on the Buttom of the team of your interest</p>
      <!--<div id="container">-->
        <div id="button-team"> </div>
        <br>
        <br>
        
      <!--</div>-->
      <!--Teams news will be dump here-->
        <div id="news-team">
          <br>
      </div>    
   </div>
      

      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <!-- Script -->
       <script>
         // Array of World Cup Teams
          var teams = ["Argentina", "Australia", "Belgium", "Brazil","Colombia","Costa Rica","Croatia","Denmark","Egypt","England","France","Germany","Iceland","Iran","Japan","Mexico","Morocco","Nigeria","Panama","Peru","Poland","Portugal","Russia","Saudi Arabia","Serbia","Senegal","South Korea","Spain","Sweden","Switzerland","Tunisia","Uruguay"];
         
          // newsapi.org Key = 7191270be1f245e497528ea460224750

          function getNews(){
            $("#news-team").empty();

            var team = $(this).attr("team-name");

            console.log(team);

            var queryURL = "https://newsapi.org/v2/everything?q=" + "+"+team +",'World Cup'&sortBy=relevancy&language=en&apiKey=7191270be1f245e497528ea460224750";

            console.log(queryURL);           
            // Creating an AJAX call for the specific national team button being clicked
            $.ajax({
              url: queryURL,
              method: "GET"
            }).done(function(dataNews) {
              
              console.log(dataNews);
              
              var results = dataNews.articles;
              
              console.log(results);

               for (var i=0; i<results.length; i++){
                  
                    var teamDiv = $("<div>");
                    var teamSnippet = $("<p>");
                    var teamNews = $("<a>");
                    var br = $("<br>");

                    teamSnippet.text(results[i].description);

                    teamNews.addClass("news");
                    
                    teamNews.attr("href", results[i].url);
                    teamNews.attr("target","_blank")
                    
                    teamNews.text(results[i].url);
                    
                    teamDiv.append(teamNews);

                    teamDiv.append(teamSnippet);

                    $("#news-team").prepend(teamDiv);
                    console.log(results[i].url);
                 
                  }
              });
            }

          function renderButtons() {
            $("#button-team").empty();
            // Looping through the array of national teams
            for (var i = 0; i < teams.length; i++) {
                  var a = $("<button>");
              
                  a.addClass("country-button")
            
                  a.attr("team-name", teams[i]);
              // Providing the initial button text
                  a.text(teams[i]);
              // Adding the button to the #button- team div
              $("#button-team").append(a);
            }
          }

          renderButtons();

          $(document).on("click",".country-button",getNews)
          
       </script>
       
     </div>
  </body> 
</html>